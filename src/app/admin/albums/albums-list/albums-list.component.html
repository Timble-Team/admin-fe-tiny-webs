<p-card>
  <p-header>
    <div class="ui-card-body f-row-no-gutters mt-2 mb-2">
      <app-filter-toolbar></app-filter-toolbar>
      <button class="mb-2" pButton type="button" label="Tạo albums" [routerLink]="['new']"></button>
    </div>
  </p-header>
  <p-table [value]="albums">
    <ng-template pTemplate="header">
      <tr>
        <ng-container *ngFor="let col of cols">
          <th *ngIf="col.field === 'name'" style="width: 300px">{{col.header}}</th>
          <th *ngIf="col.field !== 'name'">{{col.header}}</th>
        </ng-container>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-album let-rowIndex="rowIndex">
      <tr>
        <td class="row-grid" *ngFor="let col of cols; let i = index">
          <ng-container *ngIf="col.field === 'name'">
            <div class="td-image-box" >
              <img style="width: 100px; padding-right: 20px" [src]="album.cover?.url" alt="album-cover">
              <span>{{album.name}}</span>
            </div>
          </ng-container>
          <ng-container *ngIf="col.field === 'createdAt'">
            <span>{{album.createdAt | dateTime: 'HH:mm dd-MM-yyyy' : 'timestamp' }}</span>
          </ng-container>
          <ng-container *ngIf="col.field !== 'name' && col.field !== 'createdAt'">
            {{album[col.field]}}
          </ng-container>
          <span class="float-right" *ngIf="i === (cols.length - 1)" (click)="handleAction(album.id, $event)">
            <i class="pi pi-ellipsis-v"></i>
          </span>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage" let-columns>
      <tr>
        <td class="row-grid" [attr.colspan]="cols.length">
          <p>Không tìm thấy dữ liệu</p>
        </td>
      </tr> 
    </ng-template>
    <ng-template pTemplate="loadingbody" let-columns="columns">
      <tr style="height:34px">
        <td *ngFor="let col of columns">
          <div class="loading-text"></div>
        </td>
      </tr>
    </ng-template>
  </p-table>
  <div class="ui-card-body text-center mt-2 mb-2">
    <button class="mb-2 ui-button-success" pButton type="button" label="Tải thêm" (click)="getAlbums()"></button>
  </div>
</p-card> 
<p-tieredMenu #menu [model]="items" appendTo="body" [popup]="true"></p-tieredMenu>
